<?xml version="1.0"?>
<!-- 
    Bringup launch file for on-robot nodes
 -->
<launch>
    <!-- Global Arguments: -->
    <arg name="launch_slam"             default="true"/>
    <arg name="launch_init"             default="true"/>
    <arg name="launch_core"             default="false"/> <!-- Typically we do this offboard, but for onboard solutions set to true -->

    <arg name="namespace"               default="/vpr_nodes"/>

    <rosparam command="load" file="$(find aarapsi_robot_pack)/cfg/pipeline_config.yaml"/> 

    <group ns="$(arg namespace)">
        <!-- SLAM Nodes: -->
        <group if="$(arg launch_slam)">
            <include file="$(find aarapsi_robot_pack)/launch/slam.launch"/>
        </group>

        <!-- Web Server, Parameter Watcher, Image+Odom Aggregator, Image Throttle Nodes: -->
        <group if="$(arg launch_init)">
            <include file="$(find aarapsi_robot_pack)/launch/vpr/vpr_initialisation.launch"/>
        </group>

        <!-- Core Pipeline Nodes: -->
        <group if="$(arg launch_core)">
            <include file="$(find aarapsi_robot_pack)/launch/vpr/vpr_pipeline.launch"/>
        </group>
    </group>

</launch>